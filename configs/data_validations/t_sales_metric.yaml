# ----------------------------------------------------------------------
# YAML Configuration for Sales Metrics Data Validation Rules
# 
# This configuration is used by the `Validations` class to apply 
# multiple layers of quality checks on the Sales Metrics dataset.
# 
# Structure & Description:
#
# - validation_score_required: Minimum overall Data Quality Score (%) required 
#   for pipeline success. Failing this will stop further execution.
#
# - column_existence: List of required columns that must exist in the dataset.
#
# - primary_key_validation: Combination of columns that must form a unique key.
#   Duplicate rows based on these will be flagged.
#
# - null_threshold_validation: Specifies max allowable null percentage per column.
#   A value of `0` means nulls are not allowed at all.
#
# - datatype_validation: Expected Spark data types per column.
#
# - min_range_validation / max_range_validation: Indicates that the column should 
#   have numeric values within an acceptable range (actual limits may be inferred 
#   from business rules or derived dynamically).
#
# - flag_column_validation: Meant for binary indicators.
#
# - format_validation:  Intended for regex or date patterns.
#
# - business_rule_validation: Placeholder for complex rule checks (e.g. cross-field).
#
# - data_freshness_validation: Placeholder for validating if the dataset is 
#   updated within an acceptable timeframe.
# ----------------------------------------------------------------------
validation_score_required: 50

column_existence:
  - 'l3_customer'
  - 'product_distance'
  - 'production_plant' 
  - 'fulfillment_warehouse'
  - 'product_type'
  - 'kosher_indicator'
  - 'organic_indicator'
  - 'gmo_indicator' 
  - 'lactose_indicator' 
  - 'brand'
  - 'packaging'
  - 'cost_to_serve_median'
  - 'cost_to_serve_pct_sales_median'
  - 'cost_to_serve_per_lb_median'
  - 'tier_2_median'
  - 'tier_2_pct_sales_median'
  - 'tier_2_per_lb_median'
  - 'tier_3_median'
  - 'tier_3_pct_sales_median'
  - 'tier_3_per_lb_median'
  - 'tier_2_3_median'
  - 'tier_2_3_pct_sales_median'
  - 'tier_2_3_per_lb_median'
  - 'enterprise_profit_median'
  - 'enterprise_profit_pct_sales_median'
  - 'enterprise_profit_per_lb_median'
  - 'interplant_logistics_median'
  - 'interplant_logistics_pct_sales_median'
  - 'interplant_logistics_per_lb_median'
  - 'plant_ops_median'
  - 'plant_ops_pct_sales_median'
  - 'plant_ops_per_lb_median'
  - 'net_revenue'
  - 'order_qty_lbs'
  - 'order_frequency'
  - 'months_worsening_perf_cost_to_serve'
  - 'worst_month_cost_to_serve'
  - 'months_worsening_perf_tier_2'
  - 'worst_month_tier_2'
  - 'months_worsening_perf_tier_3'
  - 'worst_month_tier_3'
  - 'months_worsening_perf_tier_2_3'
  - 'worst_month_tier_2_3'
  - 'months_worsening_perf_enterprise_profit'
  - 'worst_month_enterprise_profit'
  - 'months_worsening_perf_interplant_logistics'
  - 'worst_month_interplant_logistics'
  - 'months_worsening_perf_plant_ops'
  - 'worst_month_plant_ops'
  - 'load_date'

  
primary_key_validation: 
  - 'l3_customer'
  - 'product_distance'
  - 'production_plant' 
  - 'fulfillment_warehouse'
  - 'product_type'
  - 'kosher_indicator'
  - 'organic_indicator'
  - 'gmo_indicator' 
  - 'lactose_indicator' 
  - 'brand'
  - 'packaging'

null_threshold_validation:
  l3_customer : 0
  product_distance : 0
  production_plant : 0
  fulfillment_warehouse : 0
  product_type : 0
  kosher_indicator : 0
  organic_indicator : 0
  gmo_indicator : 0
  lactose_indicator : 0
  brand : 0
  packaging : 0
  cost_to_serve_median : 5
  cost_to_serve_pct_sales_median : 5
  cost_to_serve_per_lb_median : 5
  tier_2_median : 5
  tier_2_pct_sales_median : 5
  tier_2_per_lb_median : 5
  tier_3_median : 5
  tier_3_pct_sales_median : 5
  tier_3_per_lb_median : 5
  tier_2_3_median : 5
  tier_2_3_pct_sales_median : 5
  tier_2_3_per_lb_median : 5
  enterprise_profit_median : 5
  enterprise_profit_pct_sales_median : 5
  enterprise_profit_per_lb_median : 5
  interplant_logistics_median :  5
  interplant_logistics_pct_sales_median : 5
  interplant_logistics_per_lb_median : 5
  plant_ops_median : 5
  plant_ops_pct_sales_median : 5
  plant_ops_per_lb_median : 5
  net_revenue :  5
  order_qty_lbs : 5
  order_frequency : 5
  months_worsening_perf_cost_to_serve : 0
  worst_month_cost_to_serve : 0
  months_worsening_perf_tier_2 : 0
  worst_month_tier_2 : 0
  months_worsening_perf_tier_3 : 0
  worst_month_tier_3 : 0
  months_worsening_perf_tier_2_3 : 0
  worst_month_tier_2_3 : 0
  months_worsening_perf_enterprise_profit : 0
  worst_month_enterprise_profit : 0
  months_worsening_perf_interplant_logistics :  0
  worst_month_interplant_logistics : 0
  months_worsening_perf_plant_ops : 0
  worst_month_plant_ops : 0
  load_date : 0

datatype_validation:
  l3_customer : STRING
  product_distance : STRING
  production_plant : STRING
  fulfillment_warehouse : STRING
  product_type : STRING
  kosher_indicator : STRING
  organic_indicator : STRING
  gmo_indicator : STRING
  lactose_indicator : STRING
  brand : STRING
  packaging : STRING
  cost_to_serve_median : DECIMAL
  cost_to_serve_pct_sales_median : DECIMAL
  cost_to_serve_per_lb_median : DECIMAL
  tier_2_median : DECIMAL
  tier_2_pct_sales_median : DECIMAL
  tier_2_per_lb_median : DECIMAL
  tier_3_median : DECIMAL
  tier_3_pct_sales_median : DECIMAL
  tier_3_per_lb_median : DECIMAL
  tier_2_3_median : DECIMAL
  tier_2_3_pct_sales_median : DECIMAL
  tier_2_3_per_lb_median : DECIMAL
  enterprise_profit_median : DECIMAL
  enterprise_profit_pct_sales_median : DECIMAL
  enterprise_profit_per_lb_median : DECIMAL
  interplant_logistics_median :  DECIMAL
  interplant_logistics_pct_sales_median : DECIMAL
  interplant_logistics_per_lb_median : DECIMAL
  plant_ops_median : DECIMAL
  plant_ops_pct_sales_median : DECIMAL
  plant_ops_per_lb_median : DECIMAL
  net_revenue :  DECIMAL
  order_qty_lbs : DECIMAL
  order_frequency : BIGINT
  months_worsening_perf_cost_to_serve : BIGINT
  worst_month_cost_to_serve : STRING
  months_worsening_perf_tier_2 : BIGINT
  worst_month_tier_2 : STRING
  months_worsening_perf_tier_3 : BIGINT
  worst_month_tier_3 : STRING
  months_worsening_perf_tier_2_3 : BIGINT
  worst_month_tier_2_3 : STRING
  months_worsening_perf_enterprise_profit : BIGINT
  worst_month_enterprise_profit : STRING
  months_worsening_perf_interplant_logistics :  BIGINT
  worst_month_interplant_logistics : STRING
  months_worsening_perf_plant_ops : BIGINT
  worst_month_plant_ops : STRING
  load_date : STRING



min_range_validation: None

max_range_validation: None

flag_column_validation:
  kosher_indicator : ["Kosher","Non - Kosher"]
  organic_indicator : ["Organic","Non - Organic"]
  gmo_indicator : ["Non - GMO","GMO"]
  lactose_indicator : ["Lactose - Free","Contains Lactose"]



format_validation: None
  
business_rule_validation: None

data_freshness_validation: None